# OS Concepts Review

## 基本概念

- OS: 充当媒介，内核的安全验证
- 计算机系统包含：硬件，操作系统，应用程序，用户
- 操作系统（Operating System，OS）是管理计算机硬件与软件资源的计算机程序
- 微内核：**进程间通信**、**内存管理**、**CPU调度**
- 轻量级进程 
  - > 在计算机操作系统中,轻量级进程（LWP）是一种实现多任务的方法。与普通进程相比，LWP与其他进程共享所有（或大部分）它的逻辑地址空间和系统资源；与线程相比，LWP有它自己的进程标识符，优先级，状态，以及栈和局部存储区，并和其他进程有着父子关系；这是和类Unix操作系统的系统调用vfork()生成的进程一样的。另外，线程既可由应用程序管理，又可由内核管理，而LWP只能由内核管理并像普通进程一样被调度。Linux内核是支持LWP的典型例子。

- SD 

## 进程与线程

-  **如果一个线程调用了导致阻塞的系统调用的话，那么将阻塞整个进程。**
- 平均周转时间：从作业提交到作业完成的时间间隔
- 平均等待时间：进程从作业提交到结束之前的所有等待时间之和
- 带权周转时间是调度算法的评价指标之一 [3]  ，其计算公式：$W=T/Ts$，其中 T 为周转时间，Ts 为服务时间。
- 几种调度程序
  - 长期调度程序从池中选择进程到 ready
  - 短期调度分配 CPU
  - 中期调度：可将进程从内存中移出，降低多道程序维度（swap）
- 忙等：是进程循环地等待一个事件或资源,不放弃处理器，始终等待. 
- 死锁的四个条件：
  - 资源共享
  - 占有等待
  - 循环等待
  - 非抢占

## 内存与虚拟内存

- 外部碎片和内部碎片

  - 外部碎片是总的空闲空间够，但由于分配的时候没有分配好，导致零散的空间无法放下新的

  - 内部碎片是由于固定的分片大小放置进更小的物件而存在一些无法利用的空间

   -	内部碎片存在块的内部，如内存块大小为512k，而某逻辑内存要求一个200k 大小的块，此时操作系统会分配给它一个大小为512k 的块（由于块是内存分配的最小单元），所以会造成了312k 大小的内存碎片， 这部分碎片即使是空的也无法使用，称作内部碎片。减少内部碎片可以通过减小块的大小来解决。
  - 外部碎片是指在连续内存分配的进程装入和移出内存的过程中， 空闲的内存空间被分成了较多小片段， 这些小片段不连续， 所以无法被连续分配， 这样会造成即使碎片大小之和大于新进程所需内存， 但是也无法给新进程分配的情况， 这就是外部碎片。外部碎片可以通过紧缩来解决。


## 文件系统与 I/O

### 文件系统实现

- FCB 文件控制快
  - 包括所有者、权限、文件内容和位置等信息
- 分配方法
  - 连续分配

