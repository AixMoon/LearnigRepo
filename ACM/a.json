{
    "swagger": "2.0",
    "info": {
        "description": "记住方言的声音。",
        "version": "1.0",
        "title": "JiYan API",
        "termsOfService": "数据源"
    },
    "host": "101.37.30.177",
    "basePath": "/",
    "tags": [
        {
            "name": "基本信息控制器",
            "description": "Get Dialect Categories"
        },
        {
            "name": "录音控制器",
            "description": "Add Recording"
        },
        {
            "name": "用户控制器",
            "description": "Get User Info"
        }
    ],
    "paths": {
        "/info/getDialectCategories": {
            "get": {
                "tags": [
                    "基本信息控制器"
                ],
                "summary": "获得一个方言下具体的句子分类",
                "description": "无参数，可直接使用，返回一个数组",
                "operationId": "getDialectCategoriesUsingGET",
                "produces": [
                    "*/*"
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体«List«Map«string,object»»»"
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/info/getDialectTypes": {
            "get": {
                "tags": [
                    "基本信息控制器"
                ],
                "summary": "获得所有方言种类的信息列表",
                "description": "无参数，可直接使用，返回一个数组",
                "operationId": "getDialectTypesUsingGET",
                "produces": [
                    "*/*"
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体«List«Map«string,object»»»"
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/recording/addRecording": {
            "post": {
                "tags": [
                    "录音控制器"
                ],
                "summary": "为现有的方言添加录音文件",
                "description": "上传者自动为当前登录的用户，使用前需要先登录",
                "operationId": "addRecordingUsingPOST",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "in": "formData",
                        "name": "dialect_id",
                        "description": "对应的方言 ID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "file",
                        "in": "formData",
                        "description": "要上传的录音文件，支持 mp3 和 wav 格式，最大 20 MB",
                        "required": true,
                        "type": "file"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体"
                        }
                    },
                    "201": {
                        "description": "Created"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/recording/downVote": {
            "get": {
                "tags": [
                    "录音控制器"
                ],
                "summary": "踩录音",
                "description": "用户需要先登录，返回操作的录音",
                "operationId": "downVoteRecordingUsingGET",
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "recording_id",
                        "in": "query",
                        "description": "要操作的录音 ID",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体«录音模型»"
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/recording/followRecording": {
            "post": {
                "tags": [
                    "录音控制器"
                ],
                "summary": "跟读学习",
                "description": "跟读学习的接口",
                "operationId": "followRecordingUsingPOST",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "in": "formData",
                        "name": "dialect_id",
                        "description": "要跟读的方言 ID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "file",
                        "in": "formData",
                        "description": "用户刚刚录的的录音文件，支持 mp3 和 wav 格式，最大 20 MB",
                        "required": true,
                        "type": "file"
                    },
                    {
                        "in": "formData",
                        "name": "recording_id",
                        "description": "要参考跟读的录音 ID（因为还在开发阶段所以为可选）",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体«Map«string,object»»"
                        }
                    },
                    "201": {
                        "description": "Created"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/recording/getRecordingInfo": {
            "get": {
                "tags": [
                    "录音控制器"
                ],
                "summary": "获取某一具体录音的信息",
                "description": "需要先登录。",
                "operationId": "playRecordingUsingGET",
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "recording_id",
                        "in": "query",
                        "description": "recording_id",
                        "required": true,
                        "type": "integer",
                        "format": "int64"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体«录音模型»"
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/recording/getRecordings": {
            "post": {
                "tags": [
                    "录音控制器"
                ],
                "summary": "根据方言 ID 获取录音",
                "description": "用户需要先登录，一页 100 个",
                "operationId": "downVoteRecordingUsingPOST",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "dialect_id",
                        "in": "query",
                        "description": "要操作的录音 ID",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "页码，以 0 作为第一页",
                        "required": false,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体«ArrayList«录音模型»»"
                        }
                    },
                    "201": {
                        "description": "Created"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/recording/playRecording": {
            "get": {
                "tags": [
                    "录音控制器"
                ],
                "summary": "播放录音顺便调用的接口",
                "description": "用于增加播放量，记录播放日志",
                "operationId": "playRecordingUsingGET_1",
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "recording_id",
                        "in": "query",
                        "description": "recording_id",
                        "required": true,
                        "type": "integer",
                        "format": "int64"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体«录音模型»"
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/recording/upVote": {
            "get": {
                "tags": [
                    "录音控制器"
                ],
                "summary": "点赞录音",
                "description": "用户需要先登录，返回操作的录音",
                "operationId": "upVoteRecordingUsingGET",
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "recording_id",
                        "in": "query",
                        "description": "要操作的录音 ID",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体«录音模型»"
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/user/getUserInfo": {
            "get": {
                "tags": [
                    "用户控制器"
                ],
                "summary": "获取已登录用户信息",
                "description": "可以获取当前已登录的用户信息",
                "operationId": "getUserInfoUsingGET",
                "produces": [
                    "*/*"
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体«User 用户实体»"
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/user/logIn": {
            "post": {
                "tags": [
                    "用户控制器"
                ],
                "summary": "登录接口",
                "description": "用于登录用户。每一个 session 的有效期为 30 天，如果用户长时间没有启动应用应当在启动时发送一次登录请求。",
                "operationId": "logInUsingPOST",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "identifier",
                        "in": "query",
                        "description": "认证名，可以为用户名或者邮箱，后端会自动验证",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "password",
                        "in": "query",
                        "description": "经过 SHA1 加密之后的密码字符串",
                        "required": false,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体«User 用户实体»"
                        }
                    },
                    "201": {
                        "description": "Created"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/user/logOut": {
            "get": {
                "tags": [
                    "用户控制器"
                ],
                "summary": "登出接口",
                "operationId": "logOutUsingGET",
                "produces": [
                    "*/*"
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体"
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/user/signUp": {
            "post": {
                "tags": [
                    "用户控制器"
                ],
                "summary": "注册新用户的接口",
                "description": "token_id 字段暂时未用上",
                "operationId": "signUpUsingPOST",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "email",
                        "in": "query",
                        "description": "注册邮箱",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "gender",
                        "in": "query",
                        "description": "以整数形式表示的性别。0 - 女；1 - 男； 2 - 其他",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "mastered_dialect",
                        "in": "query",
                        "description": "已掌握的方言，应该为字符串数组。",
                        "required": false,
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "multi"
                    },
                    {
                        "name": "password",
                        "in": "query",
                        "description": "密码，应该为经过 SHA1 加密后的密码（前端加密）",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "username",
                        "in": "query",
                        "description": "用户名，长度在 3 - 24 之间",
                        "required": false,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体"
                        }
                    },
                    "201": {
                        "description": "Created"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/user/updateEmail": {
            "post": {
                "tags": [
                    "用户控制器"
                ],
                "summary": "更新邮箱",
                "description": "对当前登录的用户起作用，必须先登录才能使用。",
                "operationId": "updateEmailUsingPOST",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "newEmail",
                        "in": "query",
                        "description": "新的邮箱",
                        "required": false,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体"
                        }
                    },
                    "201": {
                        "description": "Created"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/user/updateOtherInfo": {
            "post": {
                "tags": [
                    "用户控制器"
                ],
                "summary": "更新除用户名密码、邮箱以外的其他信息",
                "description": "用这个接口更新性别、掌握的方言的其他信息。参数均为非必要的，有哪个参数就更新哪个字段。\n和其他接口一样必须先登录才能使用。",
                "operationId": "updateOtherInfoUsingPOST",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "新的性别",
                        "in": "query",
                        "description": "新的性别",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "新的掌握的方言，应该为字符串数组",
                        "in": "query",
                        "description": "新的掌握的方言，应该为字符串数组",
                        "required": false,
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "multi"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体"
                        }
                    },
                    "201": {
                        "description": "Created"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/user/updatePassword": {
            "post": {
                "tags": [
                    "用户控制器"
                ],
                "summary": "更新用户密码",
                "description": "对当前登录的用户起作用，必须先登录才能使用。",
                "operationId": "updatePasswordUsingPOST",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "newPass",
                        "in": "query",
                        "description": "新密码，应该传入经过 SHA1 加密后的密码",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "oldPass",
                        "in": "query",
                        "description": "旧密码，应该传入经过 SHA1 加密后的密码",
                        "required": false,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体"
                        }
                    },
                    "201": {
                        "description": "Created"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        },
        "/user/updateUsername": {
            "post": {
                "tags": [
                    "用户控制器"
                ],
                "summary": "更新用户名",
                "description": "对当前登录的用户起作用，必须先登录才能使用。",
                "operationId": "updateUsernameUsingPOST",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "name": "newUsername",
                        "in": "query",
                        "description": "新的用户名",
                        "required": false,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/标准返回结果体"
                        }
                    },
                    "201": {
                        "description": "Created"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "deprecated": false
            }
        }
    },
    "definitions": {
        "Map«string,object»": {
            "type": "object",
            "title": "Map«string,object»",
            "additionalProperties": {
                "type": "object"
            }
        },
        "User 用户实体": {
            "type": "object",
            "properties": {
                "avatar": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "gender": {
                    "type": "string",
                    "description": "性别"
                },
                "mastered_dialect": {
                    "type": "string",
                    "description": "已掌握的方言"
                },
                "password": {
                    "type": "string",
                    "description": "密码"
                },
                "password_change_date": {
                    "type": "string",
                    "description": "密码修改日期"
                },
                "reg_date": {
                    "type": "string",
                    "description": "注册时间"
                },
                "reg_ip": {
                    "type": "string",
                    "description": "注册 IP"
                },
                "role": {
                    "type": "string",
                    "description": "用户角色"
                },
                "token_id": {
                    "type": "string",
                    "description": "认证 ID，现在应该暂时用不到这个部分"
                },
                "uid": {
                    "type": "integer",
                    "format": "int64",
                    "description": "用户 ID"
                },
                "username": {
                    "type": "string",
                    "description": "用户名"
                }
            },
            "title": "User 用户实体"
        },
        "录音模型": {
            "type": "object",
            "properties": {
                "dialect_id": {
                    "type": "integer",
                    "format": "int64",
                    "description": "方言 ID"
                },
                "dislike_count": {
                    "type": "integer",
                    "format": "int64"
                },
                "like_count": {
                    "type": "integer",
                    "format": "int64"
                },
                "link": {
                    "type": "string",
                    "description": "下载地址"
                },
                "listen_count": {
                    "type": "integer",
                    "format": "int64",
                    "description": "播放数"
                },
                "recording_id": {
                    "type": "integer",
                    "format": "int64",
                    "description": "录音 ID"
                },
                "uid": {
                    "type": "integer",
                    "format": "int64",
                    "description": "上传者 ID"
                },
                "upload_time": {
                    "type": "string",
                    "description": "上传时间"
                }
            },
            "title": "录音模型"
        },
        "标准返回结果体": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "format": "int64",
                    "description": "返回代码"
                },
                "data": {
                    "type": "object",
                    "description": "结果数据"
                },
                "message": {
                    "type": "string",
                    "description": "错误消息"
                },
                "requestid": {
                    "type": "string",
                    "description": "请求ID"
                },
                "success": {
                    "type": "boolean",
                    "description": "是否成功"
                },
                "timestamp": {
                    "type": "string",
                    "description": "时间戳"
                }
            },
            "title": "标准返回结果体"
        },
        "标准返回结果体«ArrayList«录音模型»»": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "format": "int64",
                    "description": "返回代码"
                },
                "data": {
                    "type": "array",
                    "description": "结果数据",
                    "items": {
                        "$ref": "#/definitions/录音模型"
                    }
                },
                "message": {
                    "type": "string",
                    "description": "错误消息"
                },
                "requestid": {
                    "type": "string",
                    "description": "请求ID"
                },
                "success": {
                    "type": "boolean",
                    "description": "是否成功"
                },
                "timestamp": {
                    "type": "string",
                    "description": "时间戳"
                }
            },
            "title": "标准返回结果体«ArrayList«录音模型»»"
        },
        "标准返回结果体«List«Map«string,object»»»": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "format": "int64",
                    "description": "返回代码"
                },
                "data": {
                    "type": "array",
                    "description": "结果数据",
                    "items": {
                        "$ref": "#/definitions/Map«string,object»"
                    }
                },
                "message": {
                    "type": "string",
                    "description": "错误消息"
                },
                "requestid": {
                    "type": "string",
                    "description": "请求ID"
                },
                "success": {
                    "type": "boolean",
                    "description": "是否成功"
                },
                "timestamp": {
                    "type": "string",
                    "description": "时间戳"
                }
            },
            "title": "标准返回结果体«List«Map«string,object»»»"
        },
        "标准返回结果体«Map«string,object»»": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "format": "int64",
                    "description": "返回代码"
                },
                "data": {
                    "type": "object",
                    "description": "结果数据"
                },
                "message": {
                    "type": "string",
                    "description": "错误消息"
                },
                "requestid": {
                    "type": "string",
                    "description": "请求ID"
                },
                "success": {
                    "type": "boolean",
                    "description": "是否成功"
                },
                "timestamp": {
                    "type": "string",
                    "description": "时间戳"
                }
            },
            "title": "标准返回结果体«Map«string,object»»"
        },
        "标准返回结果体«User 用户实体»": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "format": "int64",
                    "description": "返回代码"
                },
                "data": {
                    "description": "结果数据",
                    "$ref": "#/definitions/User 用户实体"
                },
                "message": {
                    "type": "string",
                    "description": "错误消息"
                },
                "requestid": {
                    "type": "string",
                    "description": "请求ID"
                },
                "success": {
                    "type": "boolean",
                    "description": "是否成功"
                },
                "timestamp": {
                    "type": "string",
                    "description": "时间戳"
                }
            },
            "title": "标准返回结果体«User 用户实体»"
        },
        "标准返回结果体«录音模型»": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "format": "int64",
                    "description": "返回代码"
                },
                "data": {
                    "description": "结果数据",
                    "$ref": "#/definitions/录音模型"
                },
                "message": {
                    "type": "string",
                    "description": "错误消息"
                },
                "requestid": {
                    "type": "string",
                    "description": "请求ID"
                },
                "success": {
                    "type": "boolean",
                    "description": "是否成功"
                },
                "timestamp": {
                    "type": "string",
                    "description": "时间戳"
                }
            },
            "title": "标准返回结果体«录音模型»"
        }
    }
}